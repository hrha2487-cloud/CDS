---
title: "Lab 3: Wrangling sales data"
author: "Ruihan He"
date: "9-22-2025"
documentclass: article
geometry: margin=1in
fontsize: 11pt
output:
  pdf_document:
    highlight: tango
    toc: false
    df_print: tibble
    fig_caption: no
    number_sections: no
    dev: pdf
  html_document:
    highlight: tango
    self_contained: true
    theme: paper
    toc: no
    df_print: kable
    fig_caption: no
    number_sections: no
    smart: yes
    dev: svg
  github_document:
    html_preview: false
    toc: true
    toc_depth: 4
    dev: svg
    df_print: kable
---

```{r setup, include = FALSE}
# DO NOT ALTER CODE IN THIS CHUNK
# Set knitr options
knitr::opts_chunk$set(
  echo = TRUE, eval = TRUE, fig.width = 5,
  fig.asp = 0.618, out.width = "80%", dpi = 120,
  fig.align = "center", cache = FALSE
)

# Load packages
suppressPackageStartupMessages(library(tidyverse))

# Load dataset
coffeeshop <- read_csv("coffeeshop.csv")
coffeeshop$date <- as.Date(coffeeshop$date)
```



### Exercise 1
```{r}
select(coffeeshop, !cogs)
```
Quickly remove a column you donâ€™t need while keeping all others.
```{r}
select(coffeeshop, starts_with('prod'))
```
Conveniently extract all product-related columns at once without listing them individually.
```{r}
select(coffeeshop, contains("pe"))
```
Useful for partial matching to extract relevant columns.
```{r}
select(coffeeshop, caffeination = type)
```
Allows you to rename a column while selecting it, making the output clearer or more meaningful.

### Exercise 2
```{r}
select(coffeeshop, caffeination = type)
```

```{r}
filter(select(coffeeshop, starts_with('prod')), product == "Darjeeling")
```



### Exercise 3
```{r}
coffeeshop %>%
  mutate(product_profit = sales - (cogs + total_expenses))
```


```{r}
coffeeshop %>%
  mutate(sales - (cogs + total_expenses))
```
The product_profit = part assigns a name to the new column I'm creating.



### Exercise 4
```{r}
coffeeshop %>%
  mutate(product_profit = sales - (cogs + total_expenses))
```

```{r mutate-profit-expiration}
coffeeshop %>%
  mutate(
    product_profit = sales - (cogs + total_expenses),
    expiration_date = date + 2
  )
```
It now has two new columns instead of one. In addition to product_profit, it also contains a new column called expiration_date created from the date column.
Because date is a Date variable, adding 2 shifts each date forward by two days. So expiration_date shows the date two days after the original date in each row.


### Exercise 5




### Exercise 6





### Exercise 7




